<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
            <meta name="viewport" content="initial-scale=1, maximum-scale=1, user-scalable=no, width=device-width">
                <title></title>
                
               
                    <link href="css/style.css" rel="stylesheet">
                        
                        <!-- IF using Sass (run gulp sass first), then uncomment below and remove the CSS includes above
                         <link href="css/ionic.app.css" rel="stylesheet">
                         -->
                        <link href="lib/ionic/css/ionic.css" rel="stylesheet">
                        
                        <!-- ionic/angularjs js -->
                        <script src="lib/ionic/js/ionic.bundle.js"></script>
                        
                        <!-- cordova script (this will be a 404 during development) -->
                        <script src="cordova.js"></script>

                        <!-- your app's js -->
                        <script src="js/app.js"></script>
                        <script src="js/controller.js"></script>
                        <script src="js/services.js"></script>
                        <script src="js/PushNotification.js"></script>
                        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
                        <script src="js/SQLitePlugin.js"></script>
                        <script type="text/javascript">
                            var pushNotification;
                            pushNotification = window.plugins.pushNotification;
                            document.addEventListener("deviceready", onDeviceReady, false);
                            function onDeviceReady() {
                               alert("1");
                               pushNotification.register(successHandler, errorHandler,{"senderID":"524888059689","ecb":"onNotificationGCM"});
                              // var parentElement = document.getElementById(id);
                              // var listeningElement = parentElement.querySelector('.listening');
                              // var receivedElement = parentElement.querySelector('.received');
                              // alert("3");
                              // listeningElement.setAttribute('style', 'display:none;');
                              // receivedElement.setAttribute('style', 'display:block;');

                              // console.log('Received Event: ' + id);
                            }
                             function successHandler (result) {
                                alert('Callback Success! Result = '+result)
                            }
                            function errorHandler (error) {
                               alert('error = ' + error);
                            }
                            function onNotificationGCM (e) {
                                switch( e.event )
                                {
                                    case 'registered':
                                        if ( e.regid.length > 0 )
                                        {
                                            console.log("Regid " + e.regid);
                                            alert('registration id = '+e.regid);
                                            window.localStorage['dev_id']= e.regid;
                                            
                                        }
                                    break;
                         
                                    case 'message':
                                      // this is the actual push notification. its format depends on the data model from the push server
                                      alert('message = '+e.message+' msgcnt = '+e.msgcnt);
                                    break;
                         
                                    case 'error':
                                      alert('GCM error = '+e.msg);
                                    break;
                         
                                    default:
                                      alert('An unknown GCM event has occurred');
                                      break;
                                }
                            }
                            $(document).on('click', "a.formanch", function () {
                                           var id = $(this).attr("id");//.split("farmsli")[1];
                                           $('#locationsul' + id).slideToggle('slow');
                                           
                                           });
                            $(document).on('click', "a.locationanch", function () {
                                                          
                                                          var id = $(this).attr("id");
                                                          $('#barnsul' + id).slideToggle('slow');
                                                          
                                           });
                                                          
                                                          
                            </script>
                        <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet">
                        </head>
    
    <body ng-app="starter" style="overflow:scroll;background-color:#EBECF4;">
        <ion-nav-view>
            <div ui-view></div>
        </ion-nav-view>
    </body>
</html>
